(function(){function QueueEvent(){this.queue={}}QueueEvent.prototype={addListener:function(name,periority,fn){var queue=this.queue;event={periority:periority,fn:fn};queue[name]=queue[name]?queue[name]:[];queue[name].push(event);this.queue=queue;return this},fire:function(name,args){var queue=this.queue;if(0===queue[name].length){return}var sortable=[];for(var event in queue[name]){sortable.push([queue[name][event],queue[name][event].periority])}sortable.sort(function(a,b){return parseFloat(a[1])-parseFloat(b[1])});for(var i in sortable){sortable[i][0].fn.apply(window,args)}}};window.QueueEvent=QueueEvent})();